start = 0
finish = 0

while(1){
    cleaner_book.wait()
    if(start == N_rooms){
        cleaner_book.signal()
        continue
    }
    if(start == 0){
        hotel_close.wait()
    }
    room = rooms.random()
    rooms.remove(room)
    start++
    cleaner_book.signal()

    sleep(room.time)

    cleaner_book.wait()
    finish++
    if(finish == N_rooms){
        start = 0
        finish = 0
        // refill rooms with fresh entries
        hotel_open.signal()
    }
    cleaner_book.signal()
}